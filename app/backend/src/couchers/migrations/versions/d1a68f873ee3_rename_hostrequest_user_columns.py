"""Rename HostRequest user columns

Revision ID: d1a68f873ee3
Revises: 62fcd41e4dcd
Create Date: 2021-07-13 01:47:30.120271

"""
from alembic import op

# revision identifiers, used by Alembic.
revision = "d1a68f873ee3"
down_revision = "a19fc23547ce"
branch_labels = None
depends_on = None


def upgrade():
    ### Manually generated
    op.alter_column("host_requests", "from_user_id", new_column_name="surfer_id")
    op.alter_column("host_requests", "to_user_id", new_column_name="host_id")
    op.alter_column("host_requests", "to_last_seen_message_id", new_column_name="host_last_seen_message_id")
    op.alter_column("host_requests", "from_last_seen_message_id", new_column_name="surfer_last_seen_message_id")

    # ### commands auto generated by Alembic - please adjust! ###
    op.drop_constraint("fk_host_requests_from_user_id_users", "host_requests", type_="foreignkey")
    op.drop_constraint("fk_host_requests_to_user_id_users", "host_requests", type_="foreignkey")
    op.create_foreign_key(op.f("fk_host_requests_host_id_users"), "host_requests", "users", ["host_id"], ["id"])
    op.create_foreign_key(op.f("fk_host_requests_surfer_id_users"), "host_requests", "users", ["surfer_id"], ["id"])
    op.drop_index("ix_host_requests_from_user_id", table_name="host_requests")
    op.drop_index("ix_host_requests_to_user_id", table_name="host_requests")
    op.create_index(op.f("ix_host_requests_host_id"), "host_requests", ["host_id"], unique=False)
    op.create_index(op.f("ix_host_requests_surfer_id"), "host_requests", ["surfer_id"], unique=False)


def downgrade():
    pass
